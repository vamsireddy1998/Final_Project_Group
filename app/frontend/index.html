<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>URL Shortener</title>
    <style>
        body { font-family: Arial; padding: 40px; text-align: center; }
        .container { max-width: 600px; margin: 0 auto; }
        input { padding: 15px; width: 80%; font-size: 16px; margin: 20px 0; }
        button { padding: 15px 30px; background: #0073bb; color: white; border: none; 
                 cursor: pointer; font-size: 16px; margin-left: 10px; }
        .result { margin-top: 30px; padding: 20px; background: #f5f5f5; 
                  border-radius: 5px; display: none; }
        .short-url { font-size: 18px; color: #0073bb; word-break: break-all; }
        .error { color: red; margin-top: 10px; }
        .copy-btn { background: #28a745; }
    </style>
</head>
<body>
    <div class="container">
        <h1>URL Shortener</h1>
        <p>Enter a long URL to shorten:</p>
        
        <input type="url" id="longUrl" placeholder="https://example.com">
        <br>
        <button onclick="shortenUrl()">Shorten URL</button>
        
        <div id="result" class="result">
            <h3>Your Short URL:</h3>
            <p>
                <a id="shortLink" target="_blank" class="short-url"></a>
                <button class="copy-btn" onclick="copyUrl()">Copy</button>
            </p>
            <div id="error" class="error"></div>
        </div>
    </div>
    
    <script>
    async function shortenUrl() {
        const url = document.getElementById('longUrl').value;
        const resultDiv = document.getElementById('result');
        const errorDiv = document.getElementById('error');
        
        if (!url) {
            errorDiv.textContent = 'Please enter a URL';
            resultDiv.style.display = 'block';
            return;
        }
        
        errorDiv.textContent = '';
        
        try {
            const response = await fetch('https://th1omwipo7.execute-api.us-east-1.amazonaws.com/prod/shorten', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ url: url })
            });
            
            if (response.ok) {
                const data = await response.json();
                document.getElementById('shortLink').href = data.short_url;
                document.getElementById('shortLink').textContent = data.short_url;
            } else {
                throw new Error(`HTTP ${response.status}`);
            }
            
        } catch (error) {
            document.getElementById('shortLink').textContent = 'Use curl command:';
            errorDiv.textContent = 'Browser blocked API call (CORS). Use curl command in terminal.';
        }
        
        resultDiv.style.display = 'block';
    }

    function copyUrl() {
        const shortLink = document.getElementById('shortLink').textContent;
        navigator.clipboard.writeText(shortLink)
            .then(() => alert('Copied to clipboard!'))
            .catch(err => alert('Failed to copy: ' + err));
    }
    </script>
</body>
</html>
